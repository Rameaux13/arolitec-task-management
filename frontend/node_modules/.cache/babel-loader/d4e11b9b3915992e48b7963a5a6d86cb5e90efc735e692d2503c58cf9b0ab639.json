{"ast":null,"code":"import axios from 'axios';\nconst API_URL = 'http://localhost:3333/auth';\n\n// Clé pour stocker le token dans le localStorage\nconst TOKEN_KEY = 'access_token';\nclass AuthService {\n  // Inscription d'un nouvel utilisateur\n  async register(data) {\n    const response = await axios.post(`${API_URL}/register`, data);\n    if (response.data.access_token) {\n      this.setToken(response.data.access_token);\n    }\n    return response.data;\n  }\n\n  // Connexion d'un utilisateur\n  async login(credentials) {\n    const response = await axios.post(`${API_URL}/login`, credentials);\n    if (response.data.access_token) {\n      this.setToken(response.data.access_token);\n    }\n    return response.data;\n  }\n\n  // Déconnexion\n  logout() {\n    localStorage.removeItem(TOKEN_KEY);\n  }\n\n  // Récupérer le profil de l'utilisateur connecté\n  async getProfile() {\n    const token = this.getToken();\n    const response = await axios.get(`${API_URL}/profile`, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    return response.data;\n  }\n\n  // Récupérer la liste de tous les utilisateurs (ADMIN ONLY)\n  async getUsers() {\n    const token = this.getToken();\n    const response = await axios.get(`${API_URL}/users`, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    return response.data;\n  }\n\n  // Sauvegarder le token dans le localStorage\n  setToken(token) {\n    localStorage.setItem(TOKEN_KEY, token);\n  }\n\n  // Récupérer le token depuis le localStorage\n  getToken() {\n    return localStorage.getItem(TOKEN_KEY);\n  }\n\n  // Vérifier si l'utilisateur est connecté\n  isAuthenticated() {\n    return this.getToken() !== null;\n  }\n}\nexport default new AuthService();","map":{"version":3,"names":["axios","API_URL","TOKEN_KEY","AuthService","register","data","response","post","access_token","setToken","login","credentials","logout","localStorage","removeItem","getProfile","token","getToken","get","headers","Authorization","getUsers","setItem","getItem","isAuthenticated"],"sources":["C:/Users/KEKEROS/OneDrive/Bureau/AROLITEC/frontend/src/services/authService.ts"],"sourcesContent":["import axios from 'axios';\r\nimport { LoginDto, RegisterDto, AuthResponse, User } from '../types/auth.types';\r\n\r\nconst API_URL = 'http://localhost:3333/auth';\r\n\r\n// Clé pour stocker le token dans le localStorage\r\nconst TOKEN_KEY = 'access_token';\r\n\r\nclass AuthService {\r\n  // Inscription d'un nouvel utilisateur\r\n  async register(data: RegisterDto): Promise<AuthResponse> {\r\n    const response = await axios.post<AuthResponse>(`${API_URL}/register`, data);\r\n    if (response.data.access_token) {\r\n      this.setToken(response.data.access_token);\r\n    }\r\n    return response.data;\r\n  }\r\n\r\n  // Connexion d'un utilisateur\r\n  async login(credentials: LoginDto): Promise<AuthResponse> {\r\n    const response = await axios.post<AuthResponse>(`${API_URL}/login`, credentials);\r\n    if (response.data.access_token) {\r\n      this.setToken(response.data.access_token);\r\n    }\r\n    return response.data;\r\n  }\r\n\r\n  // Déconnexion\r\n  logout(): void {\r\n    localStorage.removeItem(TOKEN_KEY);\r\n  }\r\n\r\n  // Récupérer le profil de l'utilisateur connecté\r\n  async getProfile(): Promise<User> {\r\n    const token = this.getToken();\r\n    const response = await axios.get<User>(`${API_URL}/profile`, {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`\r\n      }\r\n    });\r\n    return response.data;\r\n  }\r\n\r\n  // Récupérer la liste de tous les utilisateurs (ADMIN ONLY)\r\n  async getUsers(): Promise<User[]> {\r\n    const token = this.getToken();\r\n    const response = await axios.get<User[]>(`${API_URL}/users`, {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`\r\n      }\r\n    });\r\n    return response.data;\r\n  }\r\n\r\n  // Sauvegarder le token dans le localStorage\r\n  setToken(token: string): void {\r\n    localStorage.setItem(TOKEN_KEY, token);\r\n  }\r\n\r\n  // Récupérer le token depuis le localStorage\r\n  getToken(): string | null {\r\n    return localStorage.getItem(TOKEN_KEY);\r\n  }\r\n\r\n  // Vérifier si l'utilisateur est connecté\r\n  isAuthenticated(): boolean {\r\n    return this.getToken() !== null;\r\n  }\r\n}\r\n\r\nexport default new AuthService();"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAGzB,MAAMC,OAAO,GAAG,4BAA4B;;AAE5C;AACA,MAAMC,SAAS,GAAG,cAAc;AAEhC,MAAMC,WAAW,CAAC;EAChB;EACA,MAAMC,QAAQA,CAACC,IAAiB,EAAyB;IACvD,MAAMC,QAAQ,GAAG,MAAMN,KAAK,CAACO,IAAI,CAAe,GAAGN,OAAO,WAAW,EAAEI,IAAI,CAAC;IAC5E,IAAIC,QAAQ,CAACD,IAAI,CAACG,YAAY,EAAE;MAC9B,IAAI,CAACC,QAAQ,CAACH,QAAQ,CAACD,IAAI,CAACG,YAAY,CAAC;IAC3C;IACA,OAAOF,QAAQ,CAACD,IAAI;EACtB;;EAEA;EACA,MAAMK,KAAKA,CAACC,WAAqB,EAAyB;IACxD,MAAML,QAAQ,GAAG,MAAMN,KAAK,CAACO,IAAI,CAAe,GAAGN,OAAO,QAAQ,EAAEU,WAAW,CAAC;IAChF,IAAIL,QAAQ,CAACD,IAAI,CAACG,YAAY,EAAE;MAC9B,IAAI,CAACC,QAAQ,CAACH,QAAQ,CAACD,IAAI,CAACG,YAAY,CAAC;IAC3C;IACA,OAAOF,QAAQ,CAACD,IAAI;EACtB;;EAEA;EACAO,MAAMA,CAAA,EAAS;IACbC,YAAY,CAACC,UAAU,CAACZ,SAAS,CAAC;EACpC;;EAEA;EACA,MAAMa,UAAUA,CAAA,EAAkB;IAChC,MAAMC,KAAK,GAAG,IAAI,CAACC,QAAQ,CAAC,CAAC;IAC7B,MAAMX,QAAQ,GAAG,MAAMN,KAAK,CAACkB,GAAG,CAAO,GAAGjB,OAAO,UAAU,EAAE;MAC3DkB,OAAO,EAAE;QACPC,aAAa,EAAE,UAAUJ,KAAK;MAChC;IACF,CAAC,CAAC;IACF,OAAOV,QAAQ,CAACD,IAAI;EACtB;;EAEA;EACA,MAAMgB,QAAQA,CAAA,EAAoB;IAChC,MAAML,KAAK,GAAG,IAAI,CAACC,QAAQ,CAAC,CAAC;IAC7B,MAAMX,QAAQ,GAAG,MAAMN,KAAK,CAACkB,GAAG,CAAS,GAAGjB,OAAO,QAAQ,EAAE;MAC3DkB,OAAO,EAAE;QACPC,aAAa,EAAE,UAAUJ,KAAK;MAChC;IACF,CAAC,CAAC;IACF,OAAOV,QAAQ,CAACD,IAAI;EACtB;;EAEA;EACAI,QAAQA,CAACO,KAAa,EAAQ;IAC5BH,YAAY,CAACS,OAAO,CAACpB,SAAS,EAAEc,KAAK,CAAC;EACxC;;EAEA;EACAC,QAAQA,CAAA,EAAkB;IACxB,OAAOJ,YAAY,CAACU,OAAO,CAACrB,SAAS,CAAC;EACxC;;EAEA;EACAsB,eAAeA,CAAA,EAAY;IACzB,OAAO,IAAI,CAACP,QAAQ,CAAC,CAAC,KAAK,IAAI;EACjC;AACF;AAEA,eAAe,IAAId,WAAW,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}